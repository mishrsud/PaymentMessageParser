using System;
using FluentAssertions;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace AS2805.Test
{
	[TestClass]
	public class As2805MessageTests
	{
		[TestMethod]
		public void MessageParser_CanParse_RawByteArray()
		{
			byte[] message = new byte[] {
			  0x02, 0x00,
			  0x80, 0x38, 0x00, 0x01, 0x02, 0xC1, 0x00, 0x00,
			  0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
			  0x65, 0x43, 0x21,
			  0x13, 0x58, 0x40,
			  0x04, 0x19,
			  0x31, 0x31, 0x00, 0x08, 0x76, 0x54, 0x32, 0x1F,
			  0x30, 0x30,
			  0x38, 0x34, 0x30, 0x37, 0x31, 0x32, 0x33, 0x34,
			  0x37, 0x37, 0x37, 0x30, 0x30, 0x30, 0x31, 0x32, 0x33, 0x32, 0x31, 0x32, 0x33, 0x32, 0x31,
			  0x30, 0x30, 0x38,
			  0x8C, 0xA0, 0xA6, 0x42, 0x0C, 0x5C, 0xA6, 0x28,
			  0x01, 0x23};

			As2805Message as2805Message = new As2805Message(message);

			as2805Message.de11_STAN.Should().Be("654321");
		}
	}
}
